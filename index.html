<!DOCTYPE html>
<html lang="fa">
<div class="calendar-widget">
    <div class="calendar-header">
        <div class="calendar-nav">
            <button class="prev-month" onclick="changeMonth(-1)">&#8592;</button>
            <div class="current-month" id="current-month"></div>
            <button class="next-month" onclick="changeMonth(1)">&#8594;</button>
        </div>
    </div>
    <table class="calendar-table" id="calendar-table">
        <thead>
            <tr>
                <th class="purple">Ø¨</th>
                <th class="red">Ù‚</th>
                <th class="blue">Ø¢</th>
                <th class="green">Ø³</th>
                <th class="yellow">Ø²</th>
                <th class="orange">Ù†</th>
                <th class="gray">Ø®</th>
            </tr>
        </thead>
        <tbody>
            <!-- Rows of the calendar will be generated here -->
        </tbody>
    </table>
    <div class="event-display" id="event-display">Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø§Ù…Ø±ÙˆØ²: Ù‡ÛŒÚ† Ø±ÙˆÛŒØ¯Ø§Ø¯ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>
</div>

<head>
  <meta charset="UTF-8">
  <title>Ø¨Ø§Ø²ÛŒ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒØ¯Ø§Ø±ÛŒ</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f5f5f5;
      text-align: center;
    }
    .player {
      border: 2px solid #333;
      border-radius: 12px;
      padding: 10px;
      margin: 10px;
      display: inline-block;
      background-color: #ffffff;
      width: 200px;
      position: relative;
    }
    .status {
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 18px;
    }
    .log {
      background-color: #eaeaea;
      max-height: 200px;
      overflow-y: auto;
      padding: 10px;
      margin: 20px auto;
      width: 90%;
      text-align: right;
    }
    .buttons {
      margin-top: 10px;
    }
    button {
      margin: 2px;
      padding: 5px 10px;
    }
    input[type="text"], input[type="number"] {
      width: 120px;
      margin: 5px;
    }
    .rich {
      background-color: #e0ffe0;
    }
    .poor {
      background-color: #ffe0e0;
    }
    .enslaved {
      background-color: #fff0c0;
    }
    .bankrupt {
      background-color: #ffcccc; /* Ø±Ù†Ú¯ Ù¾Ø³â€ŒØ²Ù…ÛŒÙ†Ù‡ Ù‚Ø±Ù…Ø² Ø¨Ø±Ø§ÛŒ ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ */
    }
    .turn {
      border: 3px solid #0000ff;
    }
    .court {
      position: relative; /* ØªØºÛŒÛŒØ± Ø¨Ù‡ relative */
      background-color: #fff;
      border: 2px solid #333;
      border-radius: 8px;
      padding: 10px;
      width: 250px;
      margin: 20px auto; /* Ù…Ø±Ú©Ø² Ú©Ø±Ø¯Ù† Ø¨Ø§Ú©Ø³ Ø¯Ø§Ø¯Ú¯Ø§Ù‡ */
    }
.calendar-widget {
    border: 1px solid #aaa;
    border-radius: 4px;
    padding: 8px;
    width: 200px; /* Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª */
    max-width: 200px; /* Ø­Ø¯Ø§Ú©Ø«Ø± Ø¹Ø±Ø¶ */
    background-color: #ffffff;
    position: fixed; /* Ù‚Ø±Ø§Ø±Ú¯ÛŒØ±ÛŒ Ø¯Ø± Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡ */
    top: 20px; /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§ */
    left: 20px; /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ú†Ù¾ */
    z-index: 1000; /* Ø¯Ø± Ø¨Ø§Ù„Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø¹Ù†Ø§ØµØ± */
    overflow: hidden; /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø²Ø±Ú¯ Ø´Ø¯Ù† */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* Ø³Ø§ÛŒÙ‡ Ø¨Ø±Ø§ÛŒ Ø²ÛŒØ¨Ø§ÛŒÛŒ */
}

    .calendar-header {
        display: flex;
        justify-content: center;
        margin-bottom: 8px;
    }
    .calendar-nav {
        display: flex;
        align-items: center;
    }
    .calendar-nav button {
        background-color: #666;
        color: #fff;
        border: none;
        padding: 4px 6px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 12px;
        margin: 0 2px;
        cursor: pointer;
    }
    .calendar-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 10px; /* Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙÙˆÙ†Øª Ø«Ø§Ø¨Øª */
    }
    .calendar-table th, .calendar-table td {
        padding: 2px;
        text-align: center;
        border-bottom: 1px solid #aaa;
    }
    .calendar-table th {
        background-color: #555;
        color: #ffd700;
    }
    .date-cell {
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #000000;
        position: relative;
    }
    .today-cell {
        background-color: #ffd700;
        color: #222;
        font-weight: bold;
    }
    .event-display {
        margin-top: 8px;
        padding: 4px;
        background-color: #68ff42;
        border-radius: 4px;
        font-size: 10px;
        white-space: nowrap; /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø´Ú©Ø³Øª Ø®Ø· */
        overflow: hidden; /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¨Ø²Ø±Ú¯ Ø´Ø¯Ù† */
        text-overflow: ellipsis; /* Ù†Ù…Ø§ÛŒØ´ Ø³Ù‡ Ù†Ù‚Ø·Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ØªÙ† Ø·ÙˆÙ„Ø§Ù†ÛŒ */
    }
</style>

<script>
    let currentDate = new Date();

    // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¹Ù†ØµØ±
    function setPosition(element) {
        element.style.position = 'absolute'; // Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ø·Ù„Ù‚
        element.style.top = '20px'; // ÙØ§ØµÙ„Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§
        element.style.left = '20px'; // ÙØ§ØµÙ„Ù‡ Ø§Ø² Ú†Ù¾
        element.style.zIndex = '1000'; // Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ù„Ø§ÛŒÙ‡
    }
    const monthNames = [
        "Ø²Ù‡Ø±ÛŒÙ†Ø§", "Ù†ÙˆØ±Ú¯Ø§", "Ø³Ø§ÛŒÙ†Ù‡", "ÙØ±Ø¯Ø§", "ØªØ§ÛŒØºØ§", 
        "Ø¢Ø±Ø¨ÛŒâ€ŒØ§", "Ø³ÛŒØ§Ù†Ø§", "Ø®Ø§ÙˆÛŒØ±Ø§", "Ø±Ù†Ú¯Ø§", "Ù¾ÛŒÚ©Ø§"
    ];

    const events = [
        {
            title: "Ø±ÙˆØ² Ù†Ù‚Ø¯ÛŒÙ†Ú¯ÛŒ â€“ Liquidity Day",
            description: "Ù‡Ù…Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù†â€ŒÙ‡Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ø¯Ø§Ø±Ù†Ø¯ ÛŒÚ© Ø¯Ø§Ø±Ø§ÛŒÛŒ Ø±Ø§ Ø¨Ø¯ÙˆÙ† Ù‡Ø²ÛŒÙ†Ù‡ ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù¾ÙˆÙ„ Ù†Ù‚Ø¯ Ú©Ù†Ù†Ø¯.",
            effect: "Ø¬Ø±ÛŒØ§Ù† Ù†Ù‚Ø¯ Ø¨Ø§Ù„Ø§ØŒ ÙØ±ØµØª Ø¨Ø±Ø§ÛŒ Ø®Ø±ÛŒØ¯ Ø³Ø±ÛŒØ¹."
        },
        {
            title: "Ø±ÙˆØ² Ø§Ù‡Ø±Ù… â€“ Leverage Day",
            description: "Ø¨Ø§Ù†Ú© Ø¨Ù‡â€ŒØ·ÙˆØ± Ø§Ø³ØªØ«Ù†Ø§ÛŒÛŒ ØªØ§ Û² Ø¨Ø±Ø§Ø¨Ø± Ù…Ø¹Ù…ÙˆÙ„ ÙˆØ§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ØŒ Ø§Ù…Ø§ Ø¨Ù‡Ø±Ù‡ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø§Ø³Øª.",
            effect: "ÙØ±ØµØª Ø±ÛŒØ³Ú© Ø¨Ø§Ù„Ø§ØŒ Ø³ÙˆØ¯ ÛŒØ§ ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ Ø³Ø±ÛŒØ¹."
        },
        {
            title: "Ø±ÙˆØ² ÙØ±ØµØª â€“ Arbitrage Day",
            description: "Ù‚ÛŒÙ…Øª Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ Ø¨Ù‡ Ù†ÙØ¹ Ø®Ø±ÛŒØ¯Ø§Ø±Ø§Ù† Ú©Ø§Ù‡Ø´ Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯.",
            effect: "Ù…Ø¹Ø§Ù…Ù„Ù‡â€ŒÚ¯Ø±Ù‡Ø§ Ø³ÙˆØ¯ Ø³Ø±ÛŒØ¹ Ù…ÛŒâ€ŒØ¨Ø±Ù†Ø¯."
        },
        {
            title: "Ø±ÙˆØ² Ø±ÛŒØ³Ú© â€“ Speculation Day",
            description: "Ù…ÛŒâ€ŒØªÙˆØ§Ù† ÛŒÚ© Ø³Ø±Ù…Ø§ÛŒÙ‡ Ø±Ø§ Ø¯Ùˆ Ø¨Ø±Ø§Ø¨Ø± Ø§Ø¹Ù„Ø§Ù… Ú©Ø±Ø¯ Ùˆ Ø¯Ø± ØµÙˆØ±Øª Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± ÛŒÚ© ØªØ§Ø³ ÛŒØ§ Ù‚Ø±Ø¹Ù‡ØŒ Ø³ÙˆØ¯ Ø¯ÙˆØ¨Ø±Ø§Ø¨Ø± Ú¯Ø±ÙØª.",
            effect: "Ù‚Ù…Ø§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ØŒ Ø±ÛŒØ³Ú© Ø¨Ø§Ù„Ø§."
        },
        {
            title: "Ø±ÙˆØ² Ù¾Ø®Ø´ Ø¯Ø§Ø±Ø§ÛŒÛŒ â€“ Diversification Day",
            description: "Ø¨Ø§Ø²ÛŒÚ©Ù†â€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒØ´Ø§Ù† Ø±Ø§ ÙˆØ§Ú¯Ø°Ø§Ø± Ú©Ù†Ù†Ø¯ØŒ ÙˆÙ„ÛŒ Ø¯Ø± Ø¹ÙˆØ¶ ÛŒÚ© Ø¯Ø§Ø±Ø§ÛŒÛŒ ØªØµØ§Ø¯ÙÛŒ Ø¬Ø¯ÛŒØ¯ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯.",
            effect: "ØªÙ†ÙˆØ¹ Ø§Ø¬Ø¨Ø§Ø±ÛŒØŒ ÙØ±ØµØª Ú©Ø´Ù."
        },
        {
            title: "Ø±ÙˆØ² Ø¨ÛŒÙ…Ù‡ â€“ Hedging Day",
            description: "Ù‡Ø± Ø¨Ø§Ø²ÛŒÚ©Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ÛŒÚ© Ø¯Ø§Ø±Ø§ÛŒÛŒ Ø±Ø§ 'Ø¶Ø¯Ø¶Ø±Ø±' Ú©Ù†Ø¯ØŒ ÛŒØ¹Ù†ÛŒ ØªØ§ ÛŒÚ© Ø±ÙˆØ² Ø§Ø² Ø³Ù‚ÙˆØ· ÛŒØ§ ØªØµØ±Ù Ù…Ø­Ø§ÙØ¸Øª Ø´ÙˆØ¯.",
            effect: "Ù…Ø­Ø§ÙØ¸Øª Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒÚ©."
        },
        {
            title: "Ø±ÙˆØ² Ø±Ø´Ø¯ â€“ Asset Growth Day",
            description: "Ù‡Ø± Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒØ§ÛŒ Ú©Ù‡ Ø¯Ø³Øª Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø§Ø´Ø¯ØŒ ÛŒÚ© ÙˆØ§Ø­Ø¯ Ø§Ø±Ø²Ø´ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯.",
            effect: "Ø§Ù†Ø¨Ø§Ø´ØªÙ‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø³ÙˆØ¯ Ø¨Ù„Ù†Ø¯Ù…Ø¯Øª."
        },
        {
            title: "Ø±ÙˆØ² Ø³Ù‚ÙˆØ· â€“ Downturn Day",
            description: "Ø§Ø±Ø²Ø´ Ù‡Ù…Ù‡ Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ ÛŒÚ© Ù¾Ù„Ù‡ Ø³Ù‚ÙˆØ· Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ù…Ú¯Ø± Ø¢Ù†â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø±Ù‡Ù† Ø¨Ø§Ù†Ú©â€ŒØ§Ù†Ø¯.",
            effect: "Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù†Ù‚Ø¯ Ùˆ Ù…Ø­Ø§ÙØ¸Øª."
        }
    ];

    function getRandomEvent() {
        const randomEvent = events[Math.floor(Math.random() * events.length)];
        return randomEvent;
    }

    function renderCalendar() {
        const month = currentDate.getMonth();
        const year = currentDate.getFullYear();
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        document.getElementById('current-month').innerText = `${monthNames[month]} ${year}`;

        const tbody = document.querySelector('#calendar-table tbody');
        tbody.innerHTML = '';

            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªØ§Ø¨Ø¹ Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª ØªÙ‚ÙˆÛŒÙ…
    window.onload = function() {
        const calendarWidget = document.querySelector('.calendar-widget'); // Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†ØµØ± ØªÙ‚ÙˆÛŒÙ…
        setPosition(calendarWidget); // ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª
        renderCalendar(); // Ø±Ù†Ø¯Ø± ØªÙ‚ÙˆÛŒÙ…
    };

        let row = document.createElement('tr');
        for (let i = 0; i < firstDay; i++) {
            row.appendChild(document.createElement('td'));
        }

        for (let day = 1; day <= daysInMonth; day++) {
            const cell = document.createElement('td');
            const dateCell = document.createElement('div');
            dateCell.className = 'date-cell';
            dateCell.innerText = day;

            if (day === currentDate.getDate() && month === new Date().getMonth() && year === new Date().getFullYear()) {
                dateCell.classList.add('today-cell');
            }

            row.appendChild(cell);
            cell.appendChild(dateCell);

            if ((day + firstDay) % 7 === 0) {
                tbody.appendChild(row);
                row = document.createElement('tr');
            }
        }

        if (row.children.length > 0) {
            tbody.appendChild(row);
        }

        // Ù†Ù…Ø§ÛŒØ´ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯
        const event = getRandomEvent();
        document.getElementById('event-display').innerHTML = `<strong>${event.title}</strong><br>${event.description}<br><em>${event.effect}</em>`;
    }

    function changeMonth(direction) {
        currentDate.setMonth(currentDate.getMonth() + direction);
        renderCalendar();
    }

    // Initial render
    renderCalendar();
    function updateDate() {
  currentDate.setDate(currentDate.getDate() + 1); // Ø¨Ù‡ Ø¬Ù„Ùˆ Ø¨Ø±Ø¯Ù† Ø±ÙˆØ²
  renderCalendar(); // Ø±Ù†Ø¯Ø± Ù…Ø¬Ø¯Ø¯ ØªÙ‚ÙˆÛŒÙ…
}

// Ù‡Ø± 5 Ø¯Ù‚ÛŒÙ‚Ù‡ ÛŒÚ©Ø¨Ø§Ø± ØªØ§Ø±ÛŒØ® Ø±Ø§ Ø¨Ù‡ Ø¬Ù„Ùˆ Ø¨Ø¨Ø±ÛŒØ¯
setInterval(updateDate, 5 * 60 * 1000); // 5 Ø¯Ù‚ÛŒÙ‚Ù‡

</script>
<div id="day-counter" style="position: absolute; top: 20px; right: 20px; background-color: #fff; border: 1px solid #aaa; padding: 10px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
  ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§: <span id="day-count">0</span>
</div>

<script>
  let dayCount = 0;

  function updateDayCounter() {
    dayCount++;
    document.getElementById('day-count').innerText = dayCount;
  }

  // Ù‡Ø± 5 Ø¯Ù‚ÛŒÙ‚Ù‡ ÛŒÚ©Ø¨Ø§Ø± Ø´Ù…Ø§Ø±Ø´ Ø±ÙˆØ²Ù‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø±ÙˆØ² Ú©Ù†ÛŒØ¯
  setInterval(updateDayCounter, 5 * 60 * 1000); // 5 Ø¯Ù‚ÛŒÙ‚Ù‡
</script>
  <img src="https://cdn.imgurl.ir/uploads/b12534_unnamed.png" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø¨Ø§Ø²ÛŒ" style="width: 180px; display: block; margin: 0 auto 20px;" />
  <h1>Ø¨Ø§Ø²ÛŒ obro Ø¯Ù‡ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† ØªÙÚ© ØªÙÚ©</h1>
  <div id="setup">
    <h2>Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</h2>
    <input type="text" id="newPlayer" placeholder="Ù†Ø§Ù… Ø¨Ø§Ø²ÛŒÚ©Ù†">
    <button onclick="addPlayer()">â• Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø§Ø²ÛŒÚ©Ù†</button>
    <button onclick="startGame()">ğŸ² Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ</button>
    <div id="playerList"></div>
  </div>
  <div id="game" style="display: none;">
    <hr style="border: none; border-top: 2px solid #000; margin: 20px 0;">
    <img src="https://cdn.imgurl.ir/uploads/z210539_favpng_bb07d783b2a7e23a3a861d784dd01b41.png" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø¨Ø§Ù†Ú©" style="width: 50px; display: block; margin: 0 auto 5px;" />
    <div id="bank">ğŸ› Ø¨Ø§Ù†Ú© Ø³Ù„Ø·Ù†ØªÛŒ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…Ù„Ú©ÛŒØ§Ù†Ø³ : <span id="bankCoins">111</span> obro ğŸ›</div>
    <h3>Ù†ÙˆØ¨Øª: <span id="currentPlayerName"></span></h3>
    <div id="players"></div>
    <div class="log" id="log"></div>

    <!-- Ø¯Ø§Ø¯Ú¯Ø§Ù‡ -->
    <div class="court">
      <img src="https://cdn.imgurl.ir/uploads/y13033_images.png" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø¯Ø§Ø¯Ú¯Ø§Ù‡" style="width: 50px; display: block; margin: 0 auto 5px;" />
      <h4>Ø¯Ø§Ø¯Ú¯Ø§Ù‡ Ø³Ù„Ø·Ù†ØªÛŒ Ø®ØµÙˆØµÛŒ</h4>
      <h6>ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ø¨Ø²Ø±Ú¯ Ù…Ù„Ú©ÛŒØ§Ù†Ø³</h6>
      <p>Ø´Ú©Ø§ÛŒØª Ø§Ø²:</p>
      <input type="text" id="plaintiffName" placeholder="Ù†Ø§Ù… Ø´Ø§Ú©ÛŒ" disabled>
      <input type="text" id="defendantName" placeholder="Ù†Ø§Ù… Ù…ØªØ´Ø§Ú©ÛŒ">
      <input type="text" id="complaintReason" placeholder="Ø¯Ù„ÛŒÙ„ Ø´Ú©Ø§ÛŒØª">
      <input type="number" id="complaintAmount" placeholder="Ù…Ù‚Ø¯Ø§Ø± obro">
      <button onclick="submitComplaint()">ğŸ“ Ø«Ø¨Øª Ø´Ú©Ø§ÛŒØª</button>
      <input type="number" id="lawyerFee" value="3" disabled>
      <p>Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ: Û± obro</p>
      <button onclick="payLegalAdvice()">ğŸ’¼ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ</button>
      <p>Ù‡Ø²ÛŒÙ†Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´ÙˆØ§Ù‡Ø¯: Û± obro</p>
      <button onclick="collectEvidence()">ğŸ” Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´ÙˆØ§Ù‡Ø¯</button>
      <p>Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¬Ø¯ÛŒØ¯Ù†Ø¸Ø±: Û³ obro</p>
      <button onclick="requestAppeal()">ğŸ“œ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¬Ø¯ÛŒØ¯Ù†Ø¸Ø±</button>
      <button onclick="rejectComplaint(players[currentPlayerIndex])">ğŸ›¡ï¸ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ ÙˆÚ©ÛŒÙ„ Ùˆ Ù„ØºÙˆ Ø´Ú©Ø§ÛŒØª</button>
      <div id="courtDecision"></div>
      <p>Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø¯Ø®ÙˆØ§Ù‡ÛŒ: Û² obro</p>
    </div>
  </div>
  <script>
    let players = [];
    let bankCoins = 111;
    let currentPlayerIndex = 0;
    let loanTimers = {};
    let complaintTimeout;

    function addPlayer() {
      const name = document.getElementById('newPlayer').value.trim();
      if (name && players.length < 10) {
        players.push({ name, coins: 10, debt: 0, enslavedTo: null, isCapitalist: false, inPrison: false, assets: 0, isBankrupt: false });
        document.getElementById('newPlayer').value = '';
        renderPlayerList();
      }
    }

    function renderPlayerList() {
      const div = document.getElementById('playerList');
      div.innerHTML = players.map(p => `<p>${p.name}</p>`).join('');
    }

    function startGame() {
      if (players.length >= 2) {
        document.getElementById('setup').style.display = 'none';
        document.getElementById('game').style.display = 'block';
        renderPlayers();
        updateTurnDisplay();
      } else {
        alert('Ø­Ø¯Ø§Ù‚Ù„ Ø¯Ùˆ Ø¨Ø§Ø²ÛŒÚ©Ù† Ù†ÛŒØ§Ø² Ø§Ø³Øª.');
      }
    }

    function renderPlayers() {
      const container = document.getElementById('players');
      container.innerHTML = '';

      players.forEach((player, i) => {
        const div = document.createElement('div');
        let className = 'player';

        if (player.coins === 0 && player.enslavedTo === null) className += ' poor';
        else if (player.enslavedTo !== null) className += ' enslaved';
        else if (player.isBankrupt) className += ' bankrupt'; // ÙˆØ¶Ø¹ÛŒØª ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ
        else className += ' rich';

        if (i === currentPlayerIndex) className += ' turn';
        div.className = className;

        let statusIcons = '';
        if (player.debt > 0) statusIcons += 'ğŸ›';
        if (player.enslavedTo !== null) statusIcons += 'âš’';
        if (player.isCapitalist) statusIcons += 'ğŸ©';
        if (player.inPrison) statusIcons += 'â›“'; // Ù†Ø´Ø§Ù† Ø²Ù†Ø¯Ø§Ù†

        let options = '';

        // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø¨Ø§Ø²ÛŒÚ©Ù† ØªØ­Øª Ø³Ù„Ø·Ù‡ Ø§Ø³Øª ÛŒØ§ Ø®ÛŒØ±
        if (i === currentPlayerIndex) {
          const current = players[i];
          document.getElementById('plaintiffName').value = current.name; // Ù†Ø§Ù… Ø´Ø§Ú©ÛŒ Ø±Ø§ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ù†ÛŒØ¯

          if (current.enslavedTo !== null) {
            options = `<p>Ø´Ù…Ø§ ØªØ­Øª Ø³Ù„Ø·Ù‡ Ù‡Ø³ØªÛŒØ¯ Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯.</p>`;
          } else if (current.isBankrupt) {
            options = `<p>Ø´Ù…Ø§ ÙˆØ±Ø´Ú©Ø³ØªÙ‡â€ŒØ§ÛŒØ¯ Ùˆ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯.</p>`;
          } else {
            players.forEach((_, j) => {
              if (i !== j) {
                options += `<button onclick="giveCoin(${i}, ${j})">ğŸ” obro Ø¨Ù‡ ${players[j].name}</button>`;
              }
            });

            let enslaveBtn = '';
            if (current.coins > 0) {
              players.forEach((target, tIndex) => {
                if (target.coins === 0 && target.enslavedTo === null && !target.isBankrupt) {
                  enslaveBtn += `<button onclick="enslave(${i}, ${tIndex})">ğŸ§· Ú©Ø§Ù¾ÛŒØªØ§Ù„ÛŒØ³Ù… ${target.name}</button>`;
                }
              });
            }

            let freeBtn = '';
            if (current.isCapitalist) {
              players.forEach((target, tIndex) => {
                if (target.enslavedTo === i) {
                  freeBtn += `<button onclick="freeSlave(${i}, ${tIndex})">ğŸ” Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† ${target.name}</button>`;
                }
              });
            }

            options += `
              <input type="number" id="loanAmount" placeholder="Ù…Ù‚Ø¯Ø§Ø± ÙˆØ§Ù…">
              <button onclick="getLoan(${i})">ğŸ“¥ Ú¯Ø±ÙØªÙ† ÙˆØ§Ù…</button>
              <button onclick="payBackDebt(${i})">ğŸ’¸ ØªØ³ÙˆÛŒÙ‡ Ø¨Ø¯Ù‡ÛŒ ÙˆØ§Ù…</button>
              <button onclick="giveCoinToBank(${i})">ğŸ¦ Ø¯Ø§Ø¯Ù† obro Ø¨Ù‡ Ø¨Ø§Ù†Ú©</button>
              ${enslaveBtn}
              ${freeBtn}
              <button onclick="skipTurn()">â­ Ø±Ø¯ Ú©Ø±Ø¯Ù† Ù†ÙˆØ¨Øª  </button>
              <button onclick="increaseAssets(${i})">ğŸ’¼ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø±Ø§ÛŒÛŒ</button>
              <button onclick="putAssetInMortgage(${i})">ğŸ  Ø±Ù‡Ù†</button>
              <button onclick="releaseFromMortgage(${i})">ğŸ”“ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² Ø±Ù‡Ù†</button>
            `;
          }
        } else {
          options += `<button onclick="getLoan(${i})">ğŸ“¥ Ú¯Ø±ÙØªÙ† ÙˆØ§Ù…</button>`;
          options += `<button onclick="giveCoinToBank(${i})">ğŸ¦ Ø¯Ø§Ø¯Ù† obro Ø¨Ù‡ Ø¨Ø§Ù†Ú©</button>`;
        }

        div.innerHTML = `
          <div class="status">${statusIcons}</div>
          <strong>${player.name}</strong><br>
          ğŸ’° ${player.coins} obro<br>
          Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§: ${player.assets || 0}<br>
          Ø¨Ø¯Ù‡ÛŒ: ${player.debt}<br>
          <div class="buttons">${options}</div>
        `;

        container.appendChild(div);
      });

      document.getElementById('bankCoins').textContent = bankCoins;
    }

    function logAction(msg) {
      const log = document.getElementById('log');
      const p = document.createElement('p');
      p.textContent = msg;
      log.prepend(p);
    }

    function submitComplaint() {
      const plaintiffName = document.getElementById('plaintiffName').value.trim();
      const defendantName = document.getElementById('defendantName').value.trim();
      const complaintReason = document.getElementById('complaintReason').value.trim();
      const complaintAmount = parseInt(document.getElementById('complaintAmount').value.trim());
      const plaintiff = players[currentPlayerIndex];
      const defendant = players.find(p => p.name === defendantName);

      if (!defendant) {
        alert('Ø¨Ø§Ø²ÛŒÚ©Ù† Ù…ØªØ´Ø§Ú©ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.');
        return;
      }

      if (plaintiff.coins < 2) {
        alert('Ø´Ù…Ø§ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø´Ú©Ø§ÛŒØª Ú©Ù†ÛŒØ¯ Ø²ÛŒØ±Ø§ Ù‡Ø²ÛŒÙ†Ù‡ Ø´Ú©Ø§ÛŒØª (Û² obro) Ø±Ø§ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
        return;
      }

      if (plaintiff.coins === 0) {
        alert('Ø´Ù…Ø§ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø´Ú©Ø§ÛŒØª Ú©Ù†ÛŒØ¯ Ø²ÛŒØ±Ø§ obroâ€ŒØ§ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
        return;
      }

      if (isNaN(complaintAmount) || complaintAmount <= 0) {
        alert('Ù…Ù‚Ø¯Ø§Ø± obro Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª.');
        return;
      }

      // Ú©Ø³Ø± Ù‡Ø²ÛŒÙ†Ù‡ Ø´Ú©Ø§ÛŒØª Ø§Ø² Ø´Ø§Ú©ÛŒ
      plaintiff.coins -= 2;

      // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ø´Ú©Ø§ÛŒØª
      complaintTimeout = setTimeout(() => {
        handleCourtDecision(plaintiff, defendant, complaintAmount);
      }, 120000); // 2 Ø¯Ù‚ÛŒÙ‚Ù‡

      logAction(`${plaintiff.name} Ø´Ú©Ø§ÛŒØª Ø®ÙˆØ¯ Ø±Ø§ Ø«Ø¨Øª Ú©Ø±Ø¯.`);
      document.getElementById('courtDecision').textContent = `Ø´Ú©Ø§ÛŒØª ${plaintiff.name} Ø«Ø¨Øª Ø´Ø¯.`;
    }

    function handleCourtDecision(plaintiff, defendant, complaintAmount) {
      const verdict = Math.random(); // ØªØµÙ…ÛŒÙ… Ø¯Ø§Ø¯Ú¯Ø§Ù‡
      let decisionMessage = '';

      if (defendant.coins >= complaintAmount) {
        defendant.coins -= complaintAmount;
        plaintiff.coins += complaintAmount;
        decisionMessage = `${defendant.name} Ø¨Ù‡ ${plaintiff.name} ${complaintAmount} obro Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯.`;
      } else {
        decisionMessage = `${defendant.name} Ø¨Ù‡ Ø²Ù†Ø¯Ø§Ù† Ù…ÛŒâ€ŒØ±ÙˆØ¯.`;
        defendant.inPrison = true;
      }

      logAction(decisionMessage);
      document.getElementById('courtDecision').textContent = decisionMessage;
      renderPlayers();
    }

    function rejectComplaint(defendant) {
      const lawyerFee = 3;
      if (defendant.coins >= lawyerFee) {
        defendant.coins -= lawyerFee;
        bankCoins += lawyerFee;
        clearTimeout(complaintTimeout); // Ù…ØªÙˆÙ‚Ù Ú©Ø±Ø¯Ù† ØªØ§ÛŒÙ…Ø± Ø´Ú©Ø§ÛŒØª
        logAction(`${defendant.name} Ø¨Ø§ ÙˆÚ©ÛŒÙ„ Ø´Ú©Ø§ÛŒØª Ø±Ø§ Ø±Ø¯ Ú©Ø±Ø¯.`);
        document.getElementById('courtDecision').textContent = `${defendant.name} Ø´Ú©Ø§ÛŒØª Ø±Ø§ Ø±Ø¯ Ú©Ø±Ø¯.`;
        renderPlayers();
      } else {
        alert(`${defendant.name} obro Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ ÙˆÚ©ÛŒÙ„ Ù†Ø¯Ø§Ø±Ø¯.`);
      }
    }

    function payLegalAdvice() {
      const player = players[currentPlayerIndex];
      if (player.coins >= 1) {
        player.coins -= 1;
        logAction(`${player.name} Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯.`);
      } else {
        alert('Ø´Ù…Ø§ obro Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ù…Ø´Ø§ÙˆØ±Ù‡ Ø­Ù‚ÙˆÙ‚ÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
      }
    }

    function collectEvidence() {
      const player = players[currentPlayerIndex];
      if (player.coins >= 1) {
        player.coins -= 1;
        logAction(`${player.name} Ù‡Ø²ÛŒÙ†Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´ÙˆØ§Ù‡Ø¯ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯.`);
      } else {
        alert('Ø´Ù…Ø§ obro Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø´ÙˆØ§Ù‡Ø¯ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
      }
    }

    function requestAppeal() {
      const player = players[currentPlayerIndex];
      if (player.coins >= 3) {
        player.coins -= 3;
        logAction(`${player.name} Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¬Ø¯ÛŒØ¯Ù†Ø¸Ø± Ø±Ø§ Ø«Ø¨Øª Ú©Ø±Ø¯.`);
      } else {
        alert('Ø´Ù…Ø§ obro Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø®Øª Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª ØªØ¬Ø¯ÛŒØ¯Ù†Ø¸Ø± Ù†Ø¯Ø§Ø±ÛŒØ¯.');
      }
    }

    function payBackDebt(index) {
      const player = players[index];
      if (index === currentPlayerIndex && player.coins >= player.debt && player.debt > 0) {
        player.coins -= player.debt;
        bankCoins += player.debt;
        player.debt = 0;
        logAction(`${player.name} Ø¨Ø¯Ù‡ÛŒ ÙˆØ§Ù… Ø®ÙˆØ¯ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯.`);
        nextTurn();
      } else {
        alert('Ø´Ù…Ø§ Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø¯Ù‡ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ù†ÛŒØ¯.');
      }
    }

    function giveCoin(from, to) {
      const fromPlayer = players[from];
      const toPlayer = players[to];
      const amount = prompt('Ù…Ù‚Ø¯Ø§Ø± obro Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
      if (amount && from === currentPlayerIndex && fromPlayer.coins >= amount) {
        fromPlayer.coins -= amount;
        toPlayer.coins += parseInt(amount);
        logAction(`${fromPlayer.name} Ø¨Ù‡ ${toPlayer.name} ${amount} obro Ø¯Ø§Ø¯.`);
        nextTurn();
      }
    }

    function giveCoinToBank(index) {
      const player = players[index];
      const amount = prompt('Ù…Ù‚Ø¯Ø§Ø± obroâ€ŒØ§ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ø¨Ø¯Ù‡ÛŒØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
      const coinAmount = parseInt(amount);

      if (!isNaN(coinAmount) && coinAmount > 0 && player.coins >= coinAmount && index === currentPlayerIndex) {
        player.coins -= coinAmount;
        bankCoins += coinAmount;
        logAction(`${player.name} ${coinAmount} obro Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ø¯Ø§Ø¯.`);
        nextTurn();
      } else {
        alert('Ù…Ù‚Ø¯Ø§Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø± ÛŒØ§ obro Ú©Ø§ÙÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯.');
      }
    }

    function getLoan(index) {
      const amount = parseInt(document.getElementById('loanAmount').value);
      if (index === currentPlayerIndex && bankCoins >= amount && amount > 0) {
        players[index].coins += amount;
        players[index].debt += amount;
        bankCoins -= amount;
        logAction(`${players[index].name} ÙˆØ§Ù… ${amount} obroâ€ŒØ§ÛŒ Ú¯Ø±ÙØª. Ø¨Ø§Ø²Ù¾Ø±Ø¯Ø§Ø®Øª ØªØ§ 5 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯ÛŒÚ¯Ø±.`);
        startLoanTimer(index);
        nextTurn();
      }
    }

    function startLoanTimer(index) {
      if (loanTimers[index]) clearTimeout(loanTimers[index]);
      loanTimers[index] = setTimeout(() => {
        const player = players[index];
        if (player.debt > 0) {
          if (player.coins >= player.debt) {
            player.coins -= player.debt;
            bankCoins += player.debt;
            logAction(`â° Ø¨Ø§Ù†Ú© Ø¨Ø¯Ù‡ÛŒ ${player.name} Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø±Ø¯Ø§Ø´Øª.`);
          } else {
            player.isBankrupt = true; // Ø¨Ø§Ø²ÛŒÚ©Ù† ÙˆØ±Ø´Ú©Ø³ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
            bankCoins += player.assets * 2; // Ø§Ù…Ù„Ø§Ú© Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
            logAction(`ğŸ’¥ ${player.name} ÙˆØ±Ø´Ú©Ø³ØªÙ‡ Ø´Ø¯! Ø§Ù…Ù„Ø§Ú© Ø§Ùˆ Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.`);
            player.assets = 0; // Ø§Ù…Ù„Ø§Ú© Ø¶Ø¨Ø· Ù…ÛŒâ€ŒØ´ÙˆØ¯
            enslaveBankruptPlayer(player); // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¨Ø±Ø¯Ù‡
          }
          player.debt = 0;
          renderPlayers();
        }
      }, 300000);
    }

    function enslaveBankruptPlayer(player) {
      // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒÚ© Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø±Ø§ÛŒ ØªØ­Øª Ø³Ù„Ø·Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù†
      const potentialMasters = players.filter(p => p.coins > 0 && p !== player);
      if (potentialMasters.length > 0) {
        const master = potentialMasters[Math.floor(Math.random() * potentialMasters.length)];
        player.enslavedTo = players.indexOf(master);
        logAction(`${master.name} ${player.name} Ø±Ø§ ØªØ­Øª Ø³Ù„Ø·Ù‡ Ø¯Ø±Ø¢ÙˆØ±Ø¯.`);
      }
    }

    function skipTurn() {
      logAction(`${players[currentPlayerIndex].name} Ø§ÛŒÙ† Ù†ÙˆØ¨Øª Ø±Ø§ Ø±Ø¯ Ú©Ø±Ø¯.`);
      nextTurn();
    }

    function nextTurn() {
      checkBankruptcy(); // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ Ù‚Ø¨Ù„ Ø§Ø² ØªØºÛŒÛŒØ± Ù†ÙˆØ¨Øª
      do {
        currentPlayerIndex = (currentPlayerIndex + 1) % players.length;
      } while (players[currentPlayerIndex].enslavedTo !== null || players[currentPlayerIndex].isBankrupt); // Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø¢ÛŒØ§ Ø¨Ø§Ø²ÛŒÚ©Ù† ØªØ­Øª Ø³Ù„Ø·Ù‡ ÛŒØ§ ÙˆØ±Ø´Ú©Ø³ØªÙ‡ Ø§Ø³Øª
      updateTurnDisplay();
      renderPlayers();
    }

    function updateTurnDisplay() {
      document.getElementById('currentPlayerName').textContent = players[currentPlayerIndex].name;
    }

    function checkBankruptcy() {
      const player = players[currentPlayerIndex];
      if (player.coins === 0 && player.debt > 0) {
        player.isBankrupt = true; // Ø¨Ø§Ø²ÛŒÚ©Ù† ÙˆØ±Ø´Ú©Ø³ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
        bankCoins += player.assets * 2; // Ø§Ù…Ù„Ø§Ú© Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
        logAction(`ğŸ’¥ ${player.name} ÙˆØ±Ø´Ú©Ø³ØªÙ‡ Ø´Ø¯! Ø§Ù…Ù„Ø§Ú© Ø§Ùˆ Ø¨Ù‡ Ø¨Ø§Ù†Ú© Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.`);
        player.assets = 0; // Ø§Ù…Ù„Ø§Ú© Ø¶Ø¨Ø· Ù…ÛŒâ€ŒØ´ÙˆØ¯
        enslaveBankruptPlayer(player); // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ø¨Ø±Ø¯Ù‡
        renderPlayers();
        nextTurn(); // ØªØºÛŒÛŒØ± Ù†ÙˆØ¨Øª Ø¨Ù‡ Ø¨Ø§Ø²ÛŒÚ©Ù† Ø¨Ø¹Ø¯ÛŒ
      }
    }

    function enslave(masterIndex, targetIndex) {
      const master = players[masterIndex];
      const slave = players[targetIndex];
      if (masterIndex === currentPlayerIndex && bankCoins >= 10 && slave.coins === 0 && slave.enslavedTo === null && !slave.isBankrupt) {
        master.coins += 5;
        slave.coins += 5;
        slave.enslavedTo = masterIndex;
        bankCoins -= 10;
        master.isCapitalist = true;
        logAction(`${master.name}ØŒ ${slave.name} Ø±Ø§ ØªØ­Øª Ø³Ù„Ø·Ù‡ Ø¯Ø±Ø¢ÙˆØ±Ø¯ Ùˆ Ù‡Ø± Ø¯Ùˆ Ûµ obro Ú¯Ø±ÙØªÙ†Ø¯.`);
        nextTurn();
      }
    }

    function freeSlave(masterIndex, targetIndex) {
      const master = players[masterIndex];
      const slave = players[targetIndex];
      if (master.isCapitalist && slave.enslavedTo === masterIndex) {
        slave.enslavedTo = null;
        master.coins -= 5; // Ú©Ø§Ù‡Ø´ obro Ø§Ø² Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒØ¯Ø§Ø±
        logAction(`${master.name} ${slave.name} Ø±Ø§ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯.`);
        nextTurn();
      }
    }

    function increaseAssets(index) {
      players[index].assets = (players[index].assets || 0) + 1; // Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø±Ø§ÛŒÛŒ
      logAction(`${players[index].name} Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø¯.`);
      renderPlayers();
    }

    function putAssetInMortgage(index) {
      const player = players[index];
      if (player.assets > 0) {
        player.assets--;
        player.coins += 2; // Ø¯Ø±ÛŒØ§ÙØª Û² obro Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ø¯Ø§Ø±Ø§ÛŒÛŒ Ø¯Ø± Ø±Ù‡Ù†
        logAction(`${player.name} ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ø±Ù‡Ù† Ú¯Ø°Ø§Ø´Øª Ùˆ Û² obro Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯.`);
        renderPlayers();
      } else {
        alert(`${player.name} Ø¯Ø§Ø±Ø§ÛŒÛŒ Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ù‡Ù† Ù†Ø¯Ø§Ø±Ø¯.`);
      }
    }

    function releaseFromMortgage(index) {
      const player = players[index];
      if (player.coins >= 2) {
        player.coins -= 2; // Ù¾Ø±Ø¯Ø§Ø®Øª Û² obro Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ø§Ø² Ø±Ù‡Ù†
        player.assets = (player.assets || 0) + 1; // Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø±Ø§ÛŒÛŒ Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù†
        logAction(`${player.name} ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ø§Ø±Ø§ÛŒÛŒâ€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯ Ùˆ Û² obro Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ø±Ø¯.`);
        renderPlayers();
      } else {
        alert(`${player.name} obro Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ø§Ø¯ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø±Ø§ÛŒÛŒ Ø§Ø² Ø±Ù‡Ù† Ù†Ø¯Ø§Ø±Ø¯.`);
      }
    }
  </script>
</body>
</html>
